!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).universe=e()}}((function(){return function e(n,t,r){function i(u,c){if(!t[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};n[u][0].call(f.exports,(function(e){var t=n[u][1][e];return i(t||e)}),f,f.exports,e,n,t,r)}return t[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,t){n.exports=e("./src/crossfilter").crossfilter},{"./src/crossfilter":5}],2:[function(e,n,t){n.exports={name:"crossfilter2",version:"1.4.0-alpha.06",description:"Fast multidimensional filtering for coordinated views.",keywords:["analytics","visualization","crossfilter"],author:{name:"Mike Bostock",url:"http://bost.ocks.org/mike"},contributors:[{name:"Jason Davies",url:"http://www.jasondavies.com/"}],maintainers:[{name:"Gordon Woodhull",url:"https://github.com/gordonwoodhull"},{name:"Tanner Linsley",url:"https://github.com/tannerlinsley"},{name:"Ethan Jewett",url:"https://github.com/esjewett"}],homepage:"http://crossfilter.github.com/crossfilter/",main:"./index.js",repository:{type:"git",url:"http://github.com/crossfilter/crossfilter.git"},dependencies:{"lodash.result":"^4.4.0"},devDependencies:{browserify:"^13.0.0",d3:"3.5","package-json-versionify":"1.0.2","uglify-js":"2.4.0",vows:"0.7.0"},scripts:{benchmark:"node test/benchmark.js",build:"browserify index.js -t package-json-versionify --standalone crossfilter -o crossfilter.js && uglifyjs --compress --mangle --screw-ie8 crossfilter.js -o crossfilter.min.js",clean:"rm -f crossfilter.js crossfilter.min.js",test:"./node_modules/.bin/vows --verbose"},files:["src","index.js","crossfilter.js","crossfilter.min.js"]}},{}],3:[function(e,n,t){function r(e){for(var n=new Array(e),t=-1;++t<e;)n[t]=0;return n}function i(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=crossfilter_array8(e)}"undefined"!=typeof Uint8Array&&(crossfilter_array8=function(e){return new Uint8Array(e)},crossfilter_array16=function(e){return new Uint16Array(e)},crossfilter_array32=function(e){return new Uint32Array(e)},crossfilter_arrayLengthen=function(e,n){if(e.length>=n)return e;var t=new e.constructor(n);return t.set(e),t},crossfilter_arrayWiden=function(e,n){var t;switch(n){case 16:t=crossfilter_array16(e.length);break;case 32:t=crossfilter_array32(e.length);break;default:throw new Error("invalid array width!")}return t.set(e),t}),i.prototype.lengthen=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)this[n]=crossfilter_arrayLengthen(this[n],e);this.length=e},i.prototype.add=function(){var e,n,t,r,i;for(r=0,i=this.subarrays;r<i;++r)if(t=~(e=this.masks[r])&-~e,!((n=this.width-32*r)>=32)||t)return n<32&&t&1<<n&&(this[r]=crossfilter_arrayWiden(this[r],n<<=1),this.width=32*r+n),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=crossfilter_array8(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},i.prototype.copy=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)this[t][e]=this[t][n]},i.prototype.truncate=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n){for(var r=this.length-1;r>=e;r--)this[n][r]=0;this[n].length=e}this.length=e},i.prototype.zero=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)if(this[n][e])return!1;return!0},i.prototype.zeroExcept=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(r===n?this[r][e]&t:this[r][e])return!1;return!0},i.prototype.zeroExceptMask=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)if(this[t][e]&n[t])return!1;return!0},i.prototype.only=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(this[r][e]!=(r===n?t:0))return!1;return!0},i.prototype.onlyExcept=function(e,n,t,r,i){var o,u,c;for(u=0,c=this.subarrays;u<c;++u)if(o=this[u][e],u===n&&(o&=t),o!=(u===r?i:0))return!1;return!0},n.exports={array8:r,array16:r,array32:r,arrayLengthen:function(e,n){for(var t=e.length;t<n;)e[t++]=0;return e},arrayWiden:function(e,n){if(n>32)throw new Error("invalid array width!");return e},bitarray:i}},{}],4:[function(e,n,t){var r=e("./identity");function i(e){function n(n,t,r,i){for(;r<i;){var o=r+i>>>1;t<e(n[o])?i=o:r=o+1}return r}return n.right=n,n.left=function(n,t,r,i){for(;r<i;){var o=r+i>>>1;e(n[o])<t?r=o+1:i=o}return r},n}n.exports=i(r),n.exports.by=i},{"./identity":9}],5:[function(e,n,t){var r=e("./array"),o=e("./filter"),u=e("./identity"),c=e("./null"),a=e("./zero"),s=e("./heapselect"),f=e("./heap"),p=e("./bisect"),d=e("./insertionsort"),v=e("./permute"),h=e("./quicksort"),y=e("./reduce"),m=e("./../package.json"),g=e("lodash.result");function x(e,n){return(n<257?r.array8:n<65537?r.array16:r.array32)(e)}function b(e){for(var n=x(e,e),t=-1;++t<e;)n[t]=t;return n}function j(e){return 8===e?256:16===e?65536:4294967296}t.crossfilter=function(){var e,n={add:_,remove:L,dimension:E,groupAll:R,size:q,all:$,onChange:T,isElementFiltered:S},t=[],d=0,m=[],w=[],A=[],O=[];function _(r){var i=d,o=r.length;return o&&(t=t.concat(r),e.lengthen(d+=o),w.forEach((function(e){e(r,i,o)})),I("dataAdded")),n}function L(){for(var n=x(d,d),r=[],i=0,o=0;i<d;++i)e.zero(i)?r.push(i):n[i]=o++;m.forEach((function(e){e(-1,-1,[],r,!0)})),A.forEach((function(e){e(n)}));for(i=0,o=0;i<d;++i)e.zero(i)||(i!==o&&(e.copy(o,i),t[o]=t[i]),++o);t.length=d=o,e.truncate(o),I("dataRemoved")}function S(n,t){var r,i,o,u,c=Array(e.subarrays);for(r=0;r<e.subarrays;r++)c[r]=-1;if(t)for(i=0,u=t.length;i<u;i++)c[(o=t[i].id())>>7]&=~(1<<(63&o));return e.zeroExceptMask(n,c)}function E(n,O){if("string"==typeof n){var _=n;n=function(e){return g(e,_)}}var L,S,E,R,q,$,T,C,P,N,F,z,M,U,D={filter:function(e){return null==e?re():Array.isArray(e)?te(e):"function"==typeof e?ie(e):ne(e)},filterExact:ne,filterRange:te,filterFunction:ie,filterAll:re,top:function(n,r){var i,o=[],u=W,c=0;r&&r>0&&(c=r);for(;--u>=Q&&n>0;)e.zero(i=$[u])&&(c>0?--c:(o.push(t[i]),--n));if(O)for(u=0;u<M.length&&n>0;u++)e.zero(i=M[u])&&(c>0?--c:(o.push(t[i]),--n));return o},bottom:function(n,r){var i,o,u=[],c=0;r&&r>0&&(c=r);if(O)for(i=0;i<M.length&&n>0;i++)e.zero(o=M[i])&&(c>0?--c:(u.push(t[o]),--n));i=Q;for(;i<W&&n>0;)e.zero(o=$[i])&&(c>0?--c:(u.push(t[o]),--n)),i++;return u},group:ue,groupAll:function(){var e=ue(c),n=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return n()[0].value},e},dispose:ce,remove:ce,accessor:n,id:function(){return R}},B=h.by((function(e){return T[e]})),K=o.filterAll,V=[],J=[],Q=0,W=0,G=0;w.unshift(H),w.push(X),A.push(Z);var Y=e.add();function H(t,o,u){if(O){for(G=0,j=0,k=[],i=0;i<t.length;i++)for(j=0,k=n(t[i]);j<k.length;j++)G++;T=[],N=b(t.length),z=x(G,1),M=[];var c=b(G);for(l=0,i=0;i<t.length;i++)if(k=n(t[i]),k.length)for(N[i]=k.length,j=0;j<k.length;j++)T.push(k[j]),c[l]=i,l++;else N[i]=0,M.push(i);var a=B(b(G),0,G);T=v(T,a),C=v(c,a)}else T=t.map(n),C=B(b(u),0,u),T=v(T,C);O&&(u=G);var s=K(T),f=s[0],p=s[1];if(U)for(i=0;i<u;++i)U(T[i],i)||(e[E][C[i]+o]|=L,O&&(z[i]=1));else{for(i=0;i<f;++i)e[E][C[i]+o]|=L,O&&(z[i]=1);for(i=p;i<u;++i)e[E][C[i]+o]|=L,O&&(z[i]=1)}if(!o)return q=T,$=C,P=N,F=z,Q=f,void(W=p);var h=q,y=$,m=F;if(i0=0,i1=0,O&&(old_n0=o,o=h.length,u=G),q=new Array(O?o+u:d),$=O?new Array(o+u):x(d,d),O&&(F=x(o+u,1)),O){var g=P.length;P=r.arrayLengthen(P,d);for(var j=0;j+g<d;j++)P[j+g]=N[j]}for(i=0;i0<o&&i1<u;++i)h[i0]<T[i1]?(q[i]=h[i0],O&&(F[i]=m[i0]),$[i]=y[i0++]):(q[i]=T[i1],O&&(F[i]=m[i1]),$[i]=C[i1++]+(O?old_n0:o));for(;i0<o;++i0,++i)q[i]=h[i0],O&&(F[i]=m[i0]),$[i]=y[i0];for(;i1<u;++i1,++i)q[i]=T[i1],O&&(F[i]=m[i1]),$[i]=C[i1]+(O?old_n0:o);s=K(q),Q=s[0],W=s[1]}function X(e,n,t){V.forEach((function(e){e(T,C,n,t)})),T=C=null}function Z(n){for(var t,r=0,i=0;r<d;++r)e.zero(t=$[r])||(r!==i&&(q[i]=q[r]),$[i]=n[t],++i);for(q.length=i;i<d;)$[i++]=0;var o=K(q);Q=o[0],W=o[1]}function ee(n){var t=n[0],r=n[1];if(U)return U=null,oe((function(e,n){return t<=n&&n<r}),0===n[0]&&n[1]===$.length),Q=t,W=r,D;var i,o,u,c=[],a=[],s=[],f=[];if(t<Q)for(i=t,o=Math.min(Q,r);i<o;++i)c.push($[i]),s.push(i);else if(t>Q)for(i=Q,o=Math.min(t,W);i<o;++i)a.push($[i]),f.push(i);if(r>W)for(i=Math.max(t,W),o=r;i<o;++i)c.push($[i]),s.push(i);else if(r<W)for(i=Math.max(Q,r),o=W;i<o;++i)a.push($[i]),f.push(i);if(O){var l=[],p=[];for(i=0;i<c.length;i++)P[c[i]]++,F[s[i]]=0,1===P[c[i]]&&(e[E][c[i]]^=L,l.push(c[i]));for(i=0;i<a.length;i++)P[a[i]]--,F[f[i]]=1,0===P[a[i]]&&(e[E][a[i]]^=L,p.push(a[i]));if(c=l,a=p,0===n[0]&&n[1]===$.length)for(i=0;i<M.length;i++)e[E][u=M[i]]&L&&(e[E][u]^=L,c.push(u));else for(i=0;i<M.length;i++)e[E][u=M[i]]&L||(e[E][u]^=L,a.push(u))}else{for(i=0;i<c.length;i++)e[E][c[i]]^=L;for(i=0;i<a.length;i++)e[E][a[i]]^=L}return Q=t,W=r,m.forEach((function(e){e(L,E,c,a)})),I("filtered"),D}function ne(e){return ee((K=o.filterExact(p,e))(q))}function te(e){return ee((K=o.filterRange(p,e))(q))}function re(){return ee((K=o.filterAll)(q))}function ie(e){return U=e,K=o.filterAll,oe(e,!1),Q=0,W=d,D}function oe(n,t){var r,i,o,u=[],c=[],a=[],s=[],f=$.length;if(!O)for(r=0;r<f;++r)!(e[E][i=$[r]]&L)^!!(o=n(q[r],r))&&(o?u.push(i):c.push(i));if(O)for(r=0;r<f;++r)n(q[r],r)?(u.push($[r]),a.push(r)):(c.push($[r]),s.push(r));if(O){var l=[],p=[];for(r=0;r<u.length;r++)1===F[a[r]]&&(P[u[r]]++,F[a[r]]=0,1===P[u[r]]&&(e[E][u[r]]^=L,l.push(u[r])));for(r=0;r<c.length;r++)0===F[s[r]]&&(P[c[r]]--,F[s[r]]=1,0===P[c[r]]&&(e[E][c[r]]^=L,p.push(c[r])));if(u=l,c=p,t)for(r=0;r<M.length;r++)e[E][i=M[r]]&L&&(e[E][i]^=L,u.push(i));else for(r=0;r<M.length;r++)e[E][i=M[r]]&L||(e[E][i]^=L,c.push(i))}else{for(r=0;r<u.length;r++)e[E][u[r]]&L&&(e[E][u[r]]&=S);for(r=0;r<c.length;r++)e[E][c[r]]&L||(e[E][c[r]]|=L)}m.forEach((function(e){e(L,E,u,c)})),I("filtered")}function ue(n){var o={top:Q,all:K,reduce:W,reduceCount:G,reduceSum:Y,order:H,orderNatural:X,size:Z,dispose:ee,remove:ee};J.push(o);var l,p,h,g,b,k,w,_=8,R=j(_),T=0,I=c,C=c,P=!0,N=n===c;function F(o,u,a,s){O&&(n0old=a,a=q.length-o.length,s=o.length);var f,h,y,g,A,L,$=l,F=O?[]:x(T,R),z=b,K=k,V=w,J=T,Q=0,W=0;for(P&&(z=V=c),P&&(K=V=c),l=new Array(T),T=0,p=O?J>1?p:[]:J>1?r.arrayLengthen(p,d):x(d,R),J&&(y=(h=$[0]).key);W<s&&!((g=n(o[W]))>=g);)++W;for(;W<s;){for(h&&y<=g?(A=h,L=y,F[Q]=T,(h=$[++Q])&&(y=h.key)):(A={key:g,value:V()},L=g),l[T]=A;g<=L&&(f=u[W]+(O?n0old:a),O?p[f]?p[f].push(T):p[f]=[T]:p[f]=T,A.value=z(A.value,t[f],!0),e.zeroExcept(f,E,S)||(A.value=K(A.value,t[f],!1)),!(++W>=s));)g=n(o[W]);G()}for(;Q<J;)l[F[Q]=T]=$[Q++],G();if(O)for(i=0;i<d;i++)p[i]||(p[i]=[]);if(T>Q)if(O)p=v(p,F,!0);else for(Q=0;Q<a;++Q)p[Q]=F[p[Q]];function G(){O?T++:++T===R&&(F=r.arrayWiden(F,_<<=1),p=r.arrayWiden(p,_),R=j(_))}f=m.indexOf(I),T>1?(I=M,C=D):(!T&&N&&(T=1,l=[{key:null,value:V()}]),1===T?(I=U,C=B):(I=c,C=c),p=null),m[f]=I}function z(){if(T>1){for(var n=T,t=l,r=x(n,n),i=0,o=0;i<d;++i)e.zero(i)||(r[p[o]=p[i]]=1,++o);for(l=[],T=0,i=0;i<n;++i)r[i]&&(r[i]=T++,l.push(t[i]));if(T>1)for(i=0;i<o;++i)p[i]=r[p[i]];else p=null;m[m.indexOf(I)]=T>1?(C=D,I=M):1===T?(C=B,I=U):C=I=c}else if(1===T){if(N)return;for(i=0;i<d;++i)if(!e.zero(i))return;l=[],T=0,m[m.indexOf(I)]=I=C=c}}function M(n,r,i,o,u){var c,a,s,f,d;if(!(n===L&&r===E||P))if(O){for(c=0,f=i.length;c<f;++c)if(e.zeroExcept(s=i[c],E,S))for(a=0;a<p[s].length;a++)(d=l[p[s][a]]).value=b(d.value,t[s],!1,a);for(c=0,f=o.length;c<f;++c)if(e.onlyExcept(s=o[c],E,S,r,n))for(a=0;a<p[s].length;a++)(d=l[p[s][a]]).value=k(d.value,t[s],u,a)}else{for(c=0,f=i.length;c<f;++c)e.zeroExcept(s=i[c],E,S)&&((d=l[p[s]]).value=b(d.value,t[s],!1));for(c=0,f=o.length;c<f;++c)e.onlyExcept(s=o[c],E,S,r,n)&&((d=l[p[s]]).value=k(d.value,t[s],u))}}function U(n,r,i,o,u){if(!(n===L&&r===E||P)){var c,a,s,f=l[0];for(c=0,s=i.length;c<s;++c)e.zeroExcept(a=i[c],E,S)&&(f.value=b(f.value,t[a],!1));for(c=0,s=o.length;c<s;++c)e.onlyExcept(a=o[c],E,S,r,n)&&(f.value=k(f.value,t[a],u))}}function D(){var n,r,i;for(n=0;n<T;++n)l[n].value=w();if(O){for(n=0;n<d;++n)for(r=0;r<p[n].length;r++)(i=l[p[n][r]]).value=b(i.value,t[n],!0,r);for(n=0;n<d;++n)if(!e.zeroExcept(n,E,S))for(r=0;r<p[n].length;r++)(i=l[p[n][r]]).value=k(i.value,t[n],!1,r)}else{for(n=0;n<d;++n)(i=l[p[n]]).value=b(i.value,t[n],!0);for(n=0;n<d;++n)e.zeroExcept(n,E,S)||((i=l[p[n]]).value=k(i.value,t[n],!1))}}function B(){var n,r=l[0];for(r.value=w(),n=0;n<d;++n)r.value=b(r.value,t[n],!0);for(n=0;n<d;++n)e.zeroExcept(n,E,S)||(r.value=k(r.value,t[n],!1))}function K(){return P&&(C(),P=!1),l}function Q(e){var n=h(K(),0,l.length,e);return g.sort(n,0,n.length)}function W(e,n,t){return b=e,k=n,w=t,P=!0,o}function G(){return W(y.reduceIncrement,y.reduceDecrement,a)}function Y(e){return W(y.reduceAdd(e),y.reduceSubtract(e),a)}function H(e){function n(n){return e(n.value)}return h=s.by(n),g=f.by(n),o}function X(){return H(u)}function Z(){return T}function ee(){var e=m.indexOf(I);return e>=0&&m.splice(e,1),(e=V.indexOf(F))>=0&&V.splice(e,1),(e=A.indexOf(z))>=0&&A.splice(e,1),o}return arguments.length<1&&(n=u),m.push(I),V.push(F),A.push(z),F(q,$,0,d),G().orderNatural()}function ce(){J.forEach((function(e){e.dispose()}));var n=w.indexOf(H);return n>=0&&w.splice(n,1),(n=w.indexOf(X))>=0&&w.splice(n,1),(n=A.indexOf(Z))>=0&&A.splice(n,1),e.masks[E]&=S,re()}return E=Y.offset,L=Y.one,S=~L,R=E<<7|Math.log(L)/Math.log(2),H(t,0,d),X(t,0,d),D}function R(){var n,r,i,o,u={reduce:l,reduceCount:p,reduceSum:function(e){return l(y.reduceAdd(e),y.reduceSubtract(e),a)},value:function(){c&&(function(){var u;for(n=o(),u=0;u<d;++u)n=r(n,t[u],!0),e.zero(u)||(n=i(n,t[u],!1))}(),c=!1);return n},dispose:v,remove:v},c=!0;function s(o,u){var a;if(!c)for(a=u;a<d;++a)n=r(n,t[a],!0),e.zero(a)||(n=i(n,t[a],!1))}function f(o,u,a,s,f){var l,p,d;if(!c){for(l=0,d=a.length;l<d;++l)e.zero(p=a[l])&&(n=r(n,t[p],f));for(l=0,d=s.length;l<d;++l)e.only(p=s[l],u,o)&&(n=i(n,t[p],f))}}function l(e,n,t){return r=e,i=n,o=t,c=!0,u}function p(){return l(y.reduceIncrement,y.reduceDecrement,a)}function v(){var e=m.indexOf(f);return e>=0&&m.splice(e),(e=w.indexOf(s))>=0&&w.splice(e),u}return m.push(f),w.push(s),s(t,0),p()}function q(){return d}function $(){return t}function T(e){if("function"==typeof e)return O.push(e),function(){O.splice(O.indexOf(e),1)};console.warn("onChange callback parameter must be a function!")}function I(e){for(var n=0;n<O.length;n++)O[n](e)}return e=new r.bitarray(0),arguments.length?_(arguments[0]):n},t.crossfilter.heap=f,t.crossfilter.heapselect=s,t.crossfilter.bisect=p,t.crossfilter.insertionsort=d,t.crossfilter.permute=v,t.crossfilter.quicksort=h,t.crossfilter.version=m.version},{"./../package.json":2,"./array":3,"./bisect":4,"./filter":6,"./heap":7,"./heapselect":8,"./identity":9,"./insertionsort":10,"./null":11,"./permute":12,"./quicksort":13,"./reduce":14,"./zero":15,"lodash.result":16}],6:[function(e,n,t){n.exports={filterExact:function(e,n){return function(t){var r=t.length;return[e.left(t,n,0,r),e.right(t,n,0,r)]}},filterRange:function(e,n){var t=n[0],r=n[1];return function(n){var i=n.length;return[e.left(n,t,0,i),e.left(n,r,0,i)]}},filterAll:function(e){return[0,e.length]}}},{}],7:[function(e,n,t){var r=e("./identity");function i(e){function n(e,n,r){for(var i=r-n,o=1+(i>>>1);--o>0;)t(e,o,i,n);return e}function t(n,t,r,i){for(var o,u=n[--i+t],c=e(u);(o=t<<1)<=r&&(o<r&&e(n[i+o])>e(n[i+o+1])&&o++,!(c<=e(n[i+o])));)n[i+t]=n[i+o],t=o;n[i+t]=u}return n.sort=function(e,n,r){for(var i,o=r-n;--o>0;)i=e[n],e[n]=e[n+o],e[n+o]=i,t(e,1,o,n);return e},n}n.exports=i(r),n.exports.by=i},{"./identity":9}],8:[function(e,n,t){var r=e("./identity"),i=e("./heap");function o(e){var n=i.by(e);return function(t,r,i,o){var u,c,a,s=new Array(o=Math.min(i-r,o));for(c=0;c<o;++c)s[c]=t[r++];if(n(s,0,o),r<i){u=e(s[0]);do{e(a=t[r])>u&&(s[0]=a,u=e(n(s,0,o)[0]))}while(++r<i)}return s}}n.exports=o(r),n.exports.by=o},{"./heap":7,"./identity":9}],9:[function(e,n,t){n.exports=function(e){return e}},{}],10:[function(e,n,t){var r=e("./identity");function i(e){return function(n,t,r){for(var i=t+1;i<r;++i){for(var o=i,u=n[i],c=e(u);o>t&&e(n[o-1])>c;--o)n[o]=n[o-1];n[o]=u}return n}}n.exports=i(r),n.exports.by=i},{"./identity":9}],11:[function(e,n,t){n.exports=function(){return null}},{}],12:[function(e,n,t){n.exports=function(e,n,t){for(var r=0,i=n.length,o=t?JSON.parse(JSON.stringify(e)):new Array(i);r<i;++r)o[r]=e[n[r]];return o}},{}],13:[function(e,n,t){var r=e("./identity"),i=e("./insertionsort");function o(e){var n=i.by(e);function t(e,t,i){return(i-t<u?n:r)(e,t,i)}function r(n,r,i){var o,u=(i-r)/6|0,c=r+u,a=i-1-u,s=r+i-1>>1,f=s-u,l=s+u,p=n[c],d=e(p),v=n[f],h=e(v),y=n[s],m=e(y),g=n[l],x=e(g),b=n[a],k=e(b);d>h&&(o=p,p=v,v=o,o=d,d=h,h=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o),d>m&&(o=p,p=y,y=o,o=d,d=m,m=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),d>x&&(o=p,p=g,g=o,o=d,d=x,x=o),m>x&&(o=y,y=g,g=o,o=m,m=x,x=o),h>k&&(o=v,v=b,b=o,o=h,h=k,k=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o);var j=v,w=h,A=g,O=x;n[c]=p,n[f]=n[r],n[s]=y,n[l]=n[i-1],n[a]=b;var _=r+1,L=i-2,S=w<=O&&w>=O;if(S)for(var E=_;E<=L;++E){var R=n[E];if(($=e(R))<w)E!==_&&(n[E]=n[_],n[_]=R),++_;else if($>w)for(;;){if(!((T=e(n[L]))>w)){if(T<w){n[E]=n[_],n[_++]=n[L],n[L--]=R;break}n[E]=n[L],n[L--]=R;break}L--}}else for(E=_;E<=L;E++){R=n[E];if(($=e(R))<w)E!==_&&(n[E]=n[_],n[_]=R),++_;else if($>O)for(;;){if(!((T=e(n[L]))>O)){T<w?(n[E]=n[_],n[_++]=n[L],n[L--]=R):(n[E]=n[L],n[L--]=R);break}if(--L<E)break}}if(n[r]=n[_-1],n[_-1]=j,n[i-1]=n[L+1],n[L+1]=A,t(n,r,_-1),t(n,L+2,i),S)return n;if(_<c&&L>a){for(var q;(q=e(n[_]))<=w&&q>=w;)++_;for(;(T=e(n[L]))<=O&&T>=O;)--L;for(E=_;E<=L;E++){var $;R=n[E];if(($=e(R))<=w&&$>=w)E!==_&&(n[E]=n[_],n[_]=R),_++;else if($<=O&&$>=O)for(;;){var T;if(!((T=e(n[L]))<=O&&T>=O)){T<w?(n[E]=n[_],n[_++]=n[L],n[L--]=R):(n[E]=n[L],n[L--]=R);break}if(--L<E)break}}}return t(n,_,L+1)}return t}var u=32;n.exports=o(r),n.exports.by=o},{"./identity":9,"./insertionsort":10}],14:[function(e,n,t){n.exports={reduceIncrement:function(e){return e+1},reduceDecrement:function(e){return e-1},reduceAdd:function(e){return function(n,t){return n+ +e(t)}},reduceSubtract:function(e){return function(n,t){return n-e(t)}}}},{}],15:[function(e,n,t){n.exports=function(){return 0}},{}],16:[function(e,n,t){(function(e){var t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,c=/^\[object .+?Constructor\]$/,a="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,f=a||s||Function("return this")();var l,p=Array.prototype,d=Function.prototype,v=Object.prototype,h=f["__core-js_shared__"],y=(l=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",m=d.toString,g=v.hasOwnProperty,x=v.toString,b=RegExp("^"+m.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=f.Symbol,j=p.splice,w=T(f,"Map"),A=T(Object,"create"),O=k?k.prototype:void 0,_=O?O.toString:void 0;function L(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function S(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function E(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function R(e,n){for(var t,r,i=e.length;i--;)if((t=e[i][0])===(r=n)||t!=t&&r!=r)return i;return-1}function q(e){return!(!z(e)||(n=e,y&&y in n))&&(F(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}(e)?b:c).test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var n}function $(e,n){var t,r,i=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof n?"string":"hash"]:i.map}function T(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return q(t)?t:void 0}L.prototype.clear=function(){this.__data__=A?A(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var n=this.__data__;if(A){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return g.call(n,e)?n[e]:void 0},L.prototype.has=function(e){var n=this.__data__;return A?void 0!==n[e]:g.call(n,e)},L.prototype.set=function(e,n){return this.__data__[e]=A&&void 0===n?"__lodash_hash_undefined__":n,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(e){var n=this.__data__,t=R(n,e);return!(t<0)&&(t==n.length-1?n.pop():j.call(n,t,1),!0)},S.prototype.get=function(e){var n=this.__data__,t=R(n,e);return t<0?void 0:n[t][1]},S.prototype.has=function(e){return R(this.__data__,e)>-1},S.prototype.set=function(e,n){var t=this.__data__,r=R(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},E.prototype.clear=function(){this.__data__={hash:new L,map:new(w||S),string:new L}},E.prototype.delete=function(e){return $(this,e).delete(e)},E.prototype.get=function(e){return $(this,e).get(e)},E.prototype.has=function(e){return $(this,e).has(e)},E.prototype.set=function(e,n){return $(this,e).set(e,n),this};var I=P((function(e){var n;e=null==(n=e)?"":function(e){if("string"==typeof e)return e;if(M(e))return _?_.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}(n);var t=[];return i.test(e)&&t.push(""),e.replace(o,(function(e,n,r,i){t.push(r?i.replace(u,"$1"):n||e)})),t}));function C(e){if("string"==typeof e||M(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function P(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return t.cache=o.set(i,u),u};return t.cache=new(P.Cache||E),t}P.Cache=E;var N=Array.isArray;function F(e){var n=z(e)?x.call(e):"";return"[object Function]"==n||"[object GeneratorFunction]"==n}function z(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function M(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}n.exports=function(e,n,i){var o=-1,u=(n=function(e,n){if(N(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!M(e))||(r.test(e)||!t.test(e)||null!=n&&e in Object(n))}(n,e)?[n]:function(e){return N(e)?e:I(e)}(n)).length;for(u||(e=void 0,u=1);++o<u;){var c=null==e?void 0:e[C(n[o])];void 0===c&&(o=u,c=i),e=F(c)?c.call(e):c}return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,n,t){var r,i,o=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(n){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(e){r=u}try{i="function"==typeof clearTimeout?clearTimeout:c}catch(e){i=c}}();var s,f=[],l=!1,p=-1;function d(){l&&s&&(l=!1,s.length?f=s.concat(f):p=-1,f.length&&v())}function v(){if(!l){var e=a(d);l=!0;for(var n=f.length;n;){for(s=f,f=[];++p<n;)s&&s[p].run();p=-1,n=f.length}s=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(n){try{return i.call(null,e)}catch(n){return i.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function y(){}o.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];f.push(new h(e,n)),1!==f.length||l||a(v)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],18:[function(e,n,t){(function(e){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof t&&"object"==typeof n)n.exports=e();else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var r="undefined"!=typeof window?window:self,i=r.Q;r.Q=e(),r.Q.noConflict=function(){return r.Q=i,this}}}((function(){"use strict";var n=!1;try{throw new Error}catch(e){n=!!e.stack}var t,r=j(),i=function(){},o=function(){var n={task:void 0,next:null},t=n,r=!1,i=void 0,u=!1,c=[];function a(){for(var e,t;n.next;)e=(n=n.next).task,n.task=void 0,(t=n.domain)&&(n.domain=void 0,t.enter()),s(e,t);for(;c.length;)s(e=c.pop());r=!1}function s(e,n){try{e()}catch(e){if(u)throw n&&n.exit(),setTimeout(a,0),n&&n.enter(),e;setTimeout((function(){throw e}),0)}n&&n.exit()}if(o=function(n){t=t.next={task:n,domain:u&&e.domain,next:null},r||(r=!0,i())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,i=function(){e.nextTick(a)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=l,f.port1.onmessage=a,a()};var l=function(){f.port2.postMessage(0)};i=function(){setTimeout(a,0),l()}}else i=function(){setTimeout(a,0)};return o.runAfter=function(e){c.push(e),r||(r=!0,i())},o}(),u=Function.call;function c(e){return function(){return u.apply(e,arguments)}}var a,s=c(Array.prototype.slice),f=c(Array.prototype.reduce||function(e,n){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){n=this[t++];break}if(++t>=r)throw new TypeError}for(;t<r;t++)t in this&&(n=e(n,this[t],t));return n}),l=c(Array.prototype.indexOf||function(e){for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1}),p=c(Array.prototype.map||function(e,n){var t=this,r=[];return f(t,(function(i,o,u){r.push(e.call(n,o,u,t))}),void 0),r}),d=Object.create||function(e){function n(){}return n.prototype=e,new n},v=Object.defineProperty||function(e,n,t){return e[n]=t.value,e},h=c(Object.prototype.hasOwnProperty),y=Object.keys||function(e){var n=[];for(var t in e)h(e,t)&&n.push(t);return n},m=c(Object.prototype.toString);function g(e){return"[object StopIteration]"===m(e)||e instanceof a}a="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};function x(e,t){if(n&&t.stack&&"object"==typeof e&&null!==e&&e.stack){for(var r=[],i=t;i;i=i.source)i.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>i.stackCounter)&&(v(e,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),r.unshift(i.stack));r.unshift(e.stack);var o=function(e){for(var n=e.split("\n"),t=[],r=0;r<n.length;++r){var i=n[r];!k(i)&&(-1===(o=i).indexOf("(module.js:")&&-1===o.indexOf("(node.js:"))&&i&&t.push(i)}var o;return t.join("\n")}(r.join("\nFrom previous event:\n"));v(e,"stack",{value:o,configurable:!0})}}function b(e){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(n)return[n[1],Number(n[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function k(e){var n=b(e);if(!n)return!1;var i=n[0],o=n[1];return i===t&&o>=r&&o<=W}function j(){if(n)try{throw new Error}catch(n){var e=n.stack.split("\n"),r=b(e[0].indexOf("@")>0?e[1]:e[2]);if(!r)return;return t=r[0],r[1]}}function w(e){return e instanceof S?e:$(e)?function(e){var n=O();return w.nextTick((function(){try{e.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}})),n.promise}(e):D(e)}w.resolve=w,w.nextTick=o,w.longStackSupport=!1;var A=1;function O(){var e,t=[],r=[],i=d(O.prototype),o=d(S.prototype);if(o.promiseDispatch=function(n,i,o){var u=s(arguments);t?(t.push(u),"when"===i&&o[1]&&r.push(o[1])):w.nextTick((function(){e.promiseDispatch.apply(e,u)}))},o.valueOf=function(){if(t)return o;var n=R(e);return q(n)&&(e=n),n},o.inspect=function(){return e?e.inspect():{state:"pending"}},w.longStackSupport&&n)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1),o.stackCounter=A++}function u(i){e=i,w.longStackSupport&&n&&(o.source=i),f(t,(function(e,n){w.nextTick((function(){i.promiseDispatch.apply(i,n)}))}),void 0),t=void 0,r=void 0}return i.promise=o,i.resolve=function(n){e||u(w(n))},i.fulfill=function(n){e||u(D(n))},i.reject=function(n){e||u(U(n))},i.notify=function(n){e||f(r,(function(e,t){w.nextTick((function(){t(n)}))}),void 0)},i}function _(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var n=O();try{e(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}return n.promise}function L(e){return _((function(n,t){for(var r=0,i=e.length;r<i;r++)w(e[r]).then(n,t)}))}function S(e,n,t){void 0===n&&(n=function(e){return U(new Error("Promise does not support operation: "+e))}),void 0===t&&(t=function(){return{state:"unknown"}});var r=d(S.prototype);if(r.promiseDispatch=function(t,i,o){var u;try{u=e[i]?e[i].apply(r,o):n.call(r,i,o)}catch(e){u=U(e)}t&&t(u)},r.inspect=t,t){var i=t();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=t();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function E(e,n,t,r){return w(e).then(n,t,r)}function R(e){if(q(e)){var n=e.inspect();if("fulfilled"===n.state)return n.value}return e}function q(e){return e instanceof S}function $(e){return(n=e)===Object(n)&&"function"==typeof e.then;var n}"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(w.longStackSupport=!0),w.defer=O,O.prototype.makeNodeResolver=function(){var e=this;return function(n,t){n?e.reject(n):arguments.length>2?e.resolve(s(arguments,1)):e.resolve(t)}},w.Promise=_,w.promise=_,_.race=L,_.all=V,_.reject=U,_.resolve=w,w.passByCopy=function(e){return e},S.prototype.passByCopy=function(){return this},w.join=function(e,n){return w(e).join(n)},S.prototype.join=function(e){return w([this,e]).spread((function(e,n){if(e===n)return e;throw new Error("Q can't join: not the same: "+e+" "+n)}))},w.race=L,S.prototype.race=function(){return this.then(w.race)},w.makePromise=S,S.prototype.toString=function(){return"[object Promise]"},S.prototype.then=function(e,n,t){var r=this,i=O(),o=!1;return w.nextTick((function(){r.promiseDispatch((function(n){o||(o=!0,i.resolve(function(n){try{return"function"==typeof e?e(n):n}catch(e){return U(e)}}(n)))}),"when",[function(e){o||(o=!0,i.resolve(function(e){if("function"==typeof n){x(e,r);try{return n(e)}catch(e){return U(e)}}return U(e)}(e)))}])})),r.promiseDispatch(void 0,"when",[void 0,function(e){var n,r=!1;try{n=function(e){return"function"==typeof t?t(e):e}(e)}catch(e){if(r=!0,!w.onerror)throw e;w.onerror(e)}r||i.notify(n)}]),i.promise},w.tap=function(e,n){return w(e).tap(n)},S.prototype.tap=function(e){return e=w(e),this.then((function(n){return e.fcall(n).thenResolve(n)}))},w.when=E,S.prototype.thenResolve=function(e){return this.then((function(){return e}))},w.thenResolve=function(e,n){return w(e).thenResolve(n)},S.prototype.thenReject=function(e){return this.then((function(){throw e}))},w.thenReject=function(e,n){return w(e).thenReject(n)},w.nearer=R,w.isPromise=q,w.isPromiseAlike=$,w.isPending=function(e){return q(e)&&"pending"===e.inspect().state},S.prototype.isPending=function(){return"pending"===this.inspect().state},w.isFulfilled=function(e){return!q(e)||"fulfilled"===e.inspect().state},S.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},w.isRejected=function(e){return q(e)&&"rejected"===e.inspect().state},S.prototype.isRejected=function(){return"rejected"===this.inspect().state};var T,I,C,P=[],N=[],F=[],z=!0;function M(){P.length=0,N.length=0,z||(z=!0)}function U(n){var t=S({when:function(t){return t&&function(n){if(z){var t=l(N,n);-1!==t&&("object"==typeof e&&"function"==typeof e.emit&&w.nextTick.runAfter((function(){var r=l(F,n);-1!==r&&(e.emit("rejectionHandled",P[t],n),F.splice(r,1))})),N.splice(t,1),P.splice(t,1))}}(this),t?t(n):this}},(function(){return this}),(function(){return{state:"rejected",reason:n}}));return function(n,t){z&&("object"==typeof e&&"function"==typeof e.emit&&w.nextTick.runAfter((function(){-1!==l(N,n)&&(e.emit("unhandledRejection",t,n),F.push(n))})),N.push(n),t&&void 0!==t.stack?P.push(t.stack):P.push("(no stack) "+t))}(t,n),t}function D(e){return S({when:function(){return e},get:function(n){return e[n]},set:function(n,t){e[n]=t},delete:function(n){delete e[n]},post:function(n,t){return null==n?e.apply(void 0,t):e[n].apply(e,t)},apply:function(n,t){return e.apply(n,t)},keys:function(){return y(e)}},void 0,(function(){return{state:"fulfilled",value:e}}))}function B(e,n,t){return w(e).spread(n,t)}function K(e,n,t){return w(e).dispatch(n,t)}function V(e){return E(e,(function(e){var n=0,t=O();return f(e,(function(r,i,o){var u;q(i)&&"fulfilled"===(u=i.inspect()).state?e[o]=u.value:(++n,E(i,(function(r){e[o]=r,0==--n&&t.resolve(e)}),t.reject,(function(e){t.notify({index:o,value:e})})))}),void 0),0===n&&t.resolve(e),t.promise}))}function J(e){if(0===e.length)return w.resolve();var n=w.defer(),t=0;return f(e,(function(r,i,o){var u=e[o];t++,E(u,(function(e){n.resolve(e)}),(function(e){0===--t&&(e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,n.reject(e))}),(function(e){n.notify({index:o,value:e})}))}),void 0),n.promise}function Q(e){return E(e,(function(e){return e=p(e,w),E(V(p(e,(function(e){return E(e,i,i)}))),(function(){return e}))}))}w.resetUnhandledRejections=M,w.getUnhandledReasons=function(){return P.slice()},w.stopUnhandledRejectionTracking=function(){M(),z=!1},M(),w.reject=U,w.fulfill=D,w.master=function(e){return S({isDef:function(){}},(function(n,t){return K(e,n,t)}),(function(){return w(e).inspect()}))},w.spread=B,S.prototype.spread=function(e,n){return this.all().then((function(n){return e.apply(void 0,n)}),n)},w.async=function(e){return function(){function n(e,n){var o;if("undefined"==typeof StopIteration){try{o=t[e](n)}catch(e){return U(e)}return o.done?w(o.value):E(o.value,r,i)}try{o=t[e](n)}catch(e){return g(e)?w(e.value):U(e)}return E(o,r,i)}var t=e.apply(this,arguments),r=n.bind(n,"next"),i=n.bind(n,"throw");return r()}},w.spawn=function(e){w.done(w.async(e)())},w.return=function(e){throw new a(e)},w.promised=function(e){return function(){return B([this,V(arguments)],(function(n,t){return e.apply(n,t)}))}},w.dispatch=K,S.prototype.dispatch=function(e,n){var t=this,r=O();return w.nextTick((function(){t.promiseDispatch(r.resolve,e,n)})),r.promise},w.get=function(e,n){return w(e).dispatch("get",[n])},S.prototype.get=function(e){return this.dispatch("get",[e])},w.set=function(e,n,t){return w(e).dispatch("set",[n,t])},S.prototype.set=function(e,n){return this.dispatch("set",[e,n])},w.del=w.delete=function(e,n){return w(e).dispatch("delete",[n])},S.prototype.del=S.prototype.delete=function(e){return this.dispatch("delete",[e])},w.mapply=w.post=function(e,n,t){return w(e).dispatch("post",[n,t])},S.prototype.mapply=S.prototype.post=function(e,n){return this.dispatch("post",[e,n])},w.send=w.mcall=w.invoke=function(e,n){return w(e).dispatch("post",[n,s(arguments,2)])},S.prototype.send=S.prototype.mcall=S.prototype.invoke=function(e){return this.dispatch("post",[e,s(arguments,1)])},w.fapply=function(e,n){return w(e).dispatch("apply",[void 0,n])},S.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},w.try=w.fcall=function(e){return w(e).dispatch("apply",[void 0,s(arguments,1)])},S.prototype.fcall=function(){return this.dispatch("apply",[void 0,s(arguments)])},w.fbind=function(e){var n=w(e),t=s(arguments,1);return function(){return n.dispatch("apply",[this,t.concat(s(arguments))])}},S.prototype.fbind=function(){var e=this,n=s(arguments);return function(){return e.dispatch("apply",[this,n.concat(s(arguments))])}},w.keys=function(e){return w(e).dispatch("keys",[])},S.prototype.keys=function(){return this.dispatch("keys",[])},w.all=V,S.prototype.all=function(){return V(this)},w.any=J,S.prototype.any=function(){return J(this)},w.allResolved=(T=Q,I="allResolved",C="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(I+" is deprecated, use "+C+" instead.",new Error("").stack),T.apply(T,arguments)}),S.prototype.allResolved=function(){return Q(this)},w.allSettled=function(e){return w(e).allSettled()},S.prototype.allSettled=function(){return this.then((function(e){return V(p(e,(function(e){function n(){return e.inspect()}return(e=w(e)).then(n,n)})))}))},w.fail=w.catch=function(e,n){return w(e).then(void 0,n)},S.prototype.fail=S.prototype.catch=function(e){return this.then(void 0,e)},w.progress=function(e,n){return w(e).then(void 0,void 0,n)},S.prototype.progress=function(e){return this.then(void 0,void 0,e)},w.fin=w.finally=function(e,n){return w(e).finally(n)},S.prototype.fin=S.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=w(e),this.then((function(n){return e.fcall().then((function(){return n}))}),(function(n){return e.fcall().then((function(){throw n}))}))},w.done=function(e,n,t,r){return w(e).done(n,t,r)},S.prototype.done=function(n,t,r){var i=function(e){w.nextTick((function(){if(x(e,o),!w.onerror)throw e;w.onerror(e)}))},o=n||t||r?this.then(n,t,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),o.then(void 0,i)},w.timeout=function(e,n,t){return w(e).timeout(n,t)},S.prototype.timeout=function(e,n){var t=O(),r=setTimeout((function(){n&&"string"!=typeof n||((n=new Error(n||"Timed out after "+e+" ms")).code="ETIMEDOUT"),t.reject(n)}),e);return this.then((function(e){clearTimeout(r),t.resolve(e)}),(function(e){clearTimeout(r),t.reject(e)}),t.notify),t.promise},w.delay=function(e,n){return void 0===n&&(n=e,e=void 0),w(e).delay(n)},S.prototype.delay=function(e){return this.then((function(n){var t=O();return setTimeout((function(){t.resolve(n)}),e),t.promise}))},w.nfapply=function(e,n){return w(e).nfapply(n)},S.prototype.nfapply=function(e){var n=O(),t=s(e);return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},w.nfcall=function(e){var n=s(arguments,1);return w(e).nfapply(n)},S.prototype.nfcall=function(){var e=s(arguments),n=O();return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},w.nfbind=w.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var n=s(arguments,1);return function(){var t=n.concat(s(arguments)),r=O();return t.push(r.makeNodeResolver()),w(e).fapply(t).fail(r.reject),r.promise}},S.prototype.nfbind=S.prototype.denodeify=function(){var e=s(arguments);return e.unshift(this),w.denodeify.apply(void 0,e)},w.nbind=function(e,n){var t=s(arguments,2);return function(){var r=t.concat(s(arguments)),i=O();function o(){return e.apply(n,arguments)}return r.push(i.makeNodeResolver()),w(o).fapply(r).fail(i.reject),i.promise}},S.prototype.nbind=function(){var e=s(arguments,0);return e.unshift(this),w.nbind.apply(void 0,e)},w.nmapply=w.npost=function(e,n,t){return w(e).npost(n,t)},S.prototype.nmapply=S.prototype.npost=function(e,n){var t=s(n||[]),r=O();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},w.nsend=w.nmcall=w.ninvoke=function(e,n){var t=s(arguments,2),r=O();return t.push(r.makeNodeResolver()),w(e).dispatch("post",[n,t]).fail(r.reject),r.promise},S.prototype.nsend=S.prototype.nmcall=S.prototype.ninvoke=function(e){var n=s(arguments,1),t=O();return n.push(t.makeNodeResolver()),this.dispatch("post",[e,n]).fail(t.reject),t.promise},w.nodeify=function(e,n){return w(e).nodeify(n)},S.prototype.nodeify=function(e){if(!e)return this;this.then((function(n){w.nextTick((function(){e(null,n)}))}),(function(n){w.nextTick((function(){e(n)}))}))},w.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var W=j();return w}))}).call(this,e("_process"))},{_process:17}],19:[function(e,n,t){var r=e("./parameters.js");_assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;++t){var r=arguments[t];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])}return n};var i={build:function e(n,t){function i(e){if("string"==typeof e){var n=e;return function(e){return e[n]}}return e}function o(e){if("string"==typeof e){var n=e;return function(e){return+e[n]}}return e}n.fromObject=function(e){return arguments.length?(_assign(t,e),n):t},n.toObject=function(){return t},n.count=function(e,r){return arguments.length?(r||(r="count"),t.count=r,n):t.count},n.sum=function(e){return arguments.length?(e=o(e),t.sum=e,n):t.sum},n.avg=function(e){return arguments.length?("function"==typeof(e=o(e))?(t.sum&&t.sum!==e&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),t.sum=e,t.avg=!0,t.count="count"):t.avg=e,n):t.avg},n.exception=function(e){return arguments.length?(e=i(e),t.exceptionAccessor=e,n):t.exceptionAccessor},n.filter=function(e){return arguments.length?(t.filter=e,n):t.filter},n.valueList=function(e){return arguments.length?(e=i(e),t.valueList=e,n):t.valueList},n.median=function(e){return arguments.length?("function"==typeof(e=o(e))&&(t.valueList&&t.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),t.valueList=e),t.median=e,n):t.median},n.min=function(e){return arguments.length?("function"==typeof(e=o(e))&&(t.valueList&&t.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by min aggregation"),t.valueList=e),t.min=e,n):t.min},n.max=function(e){return arguments.length?("function"==typeof(e=o(e))&&(t.valueList&&t.valueList!==e&&console.warn("VALUELIST accessor is being overwritten by max aggregation"),t.valueList=e),t.max=e,n):t.max},n.exceptionCount=function(e){return arguments.length?("function"==typeof(e=i(e))?(t.exceptionAccessor&&t.exceptionAccessor!==e&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),t.exceptionAccessor=e,t.exceptionCount=!0):t.exceptionCount=e,n):t.exceptionCount},n.exceptionSum=function(e){return arguments.length?(e=o(e),t.exceptionSum=e,n):t.exceptionSum},n.histogramValue=function(e){return arguments.length?(e=o(e),t.histogramValue=e,n):t.histogramValue},n.histogramBins=function(e){return arguments.length?(t.histogramThresholds=e,n):t.histogramThresholds},n.std=function(e){return arguments.length?("function"==typeof(e=o(e))?(t.sumOfSquares=e,t.sum=e,t.count="count",t.std=!0):t.std=e,n):t.std},n.sumOfSq=function(e){return arguments.length?(e=o(e),t.sumOfSquares=e,n):t.sumOfSquares},n.value=function(n,i){if(arguments.length&&"string"==typeof n)return t.values||(t.values={}),t.values[n]={},t.values[n].parameters=r(),e(t.values[n],t.values[n].parameters),i&&(t.values[n].accessor=i),t.values[n];console.error("'value' requires a string argument.")},n.nest=function(e){return arguments.length?(e.map(i),t.nestKeys=e,n):t.nestKeys},n.alias=function(e){return arguments.length?(t.aliasKeys=e,n):t.aliasKeys},n.aliasProp=function(e){return arguments.length?(t.aliasPropKeys=e,n):t.aliasPropKeys},n.groupAll=function(e){return arguments.length?(t.groupAll=e,n):t.groupAll},n.dataList=function(e){return arguments.length?(t.dataList=e,n):t.dataList},n.custom=function(e){return arguments.length?(t.custom=e,n):t.custom}}};n.exports=i},{"./parameters.js":36}],20:[function(e,n,t){n.exports={initial:function(e,n,t){return function(r){function i(e){return function(){return t[e](n(r))}}for(var o in e&&(r=e(r)),t)n(r)[o]=i(o);return r}}}},{}],21:[function(e,n,t){n.exports={add:function(e,n,t){return function(r,i,o){for(var u in n&&n(r,i,o),e)t(r)[u]=e[u](t(r),i);return r}}}},{}],22:[function(e,n,t){n.exports={add:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},remove:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},initial:function(e,n){return function(t){return t=e(t),n(t).avg=0,t}}}},{}],23:[function(e,n,t){var r=e("./filter.js"),i=e("./count.js"),o=e("./sum.js"),u=e("./avg.js"),c=e("./median.js"),a=e("./min.js"),s=e("./max.js"),f=e("./value-count.js"),l=e("./value-list.js"),p=e("./exception-count.js"),d=e("./exception-sum.js"),v=e("./histogram.js"),h=e("./sum-of-squares.js"),y=e("./std.js"),m=e("./nest.js"),g=e("./alias.js"),x=e("./aliasProp.js"),b=e("./data-list.js"),k=e("./custom.js");var j={build:function e(n,t,j){j||(j=function(e){return e});var w={reduceAdd:t.reduceAdd,reduceRemove:t.reduceRemove,reduceInitial:t.reduceInitial};(n.count||n.std)&&(t.reduceAdd=i.add(t.reduceAdd,j,n.count),t.reduceRemove=i.remove(t.reduceRemove,j,n.count),t.reduceInitial=i.initial(t.reduceInitial,j,n.count)),n.sum&&(t.reduceAdd=o.add(n.sum,t.reduceAdd,j),t.reduceRemove=o.remove(n.sum,t.reduceRemove,j),t.reduceInitial=o.initial(t.reduceInitial,j)),n.avg&&(n.count&&n.sum?(t.reduceAdd=u.add(n.sum,t.reduceAdd,j),t.reduceRemove=u.remove(n.sum,t.reduceRemove,j),t.reduceInitial=u.initial(t.reduceInitial,j)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),n.exceptionCount&&(n.exceptionAccessor?(t.reduceAdd=p.add(n.exceptionAccessor,t.reduceAdd,j),t.reduceRemove=p.remove(n.exceptionAccessor,t.reduceRemove,j),t.reduceInitial=p.initial(t.reduceInitial,j)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),n.exceptionSum&&(n.exceptionAccessor?(t.reduceAdd=d.add(n.exceptionAccessor,n.exceptionSum,t.reduceAdd,j),t.reduceRemove=d.remove(n.exceptionAccessor,n.exceptionSum,t.reduceRemove,j),t.reduceInitial=d.initial(t.reduceInitial,j)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(n.valueList||n.median||n.min||n.max)&&(t.reduceAdd=l.add(n.valueList,t.reduceAdd,j),t.reduceRemove=l.remove(n.valueList,t.reduceRemove,j),t.reduceInitial=l.initial(t.reduceInitial,j)),n.dataList&&(t.reduceAdd=b.add(n.dataList,t.reduceAdd,j),t.reduceRemove=b.remove(n.dataList,t.reduceRemove,j),t.reduceInitial=b.initial(t.reduceInitial,j)),n.median&&(t.reduceAdd=c.add(t.reduceAdd,j),t.reduceRemove=c.remove(t.reduceRemove,j),t.reduceInitial=c.initial(t.reduceInitial,j)),n.min&&(t.reduceAdd=a.add(t.reduceAdd,j),t.reduceRemove=a.remove(t.reduceRemove,j),t.reduceInitial=a.initial(t.reduceInitial,j)),n.max&&(t.reduceAdd=s.add(t.reduceAdd,j),t.reduceRemove=s.remove(t.reduceRemove,j),t.reduceInitial=s.initial(t.reduceInitial,j)),n.exceptionAccessor&&(t.reduceAdd=f.add(n.exceptionAccessor,t.reduceAdd,j),t.reduceRemove=f.remove(n.exceptionAccessor,t.reduceRemove,j),t.reduceInitial=f.initial(t.reduceInitial,j)),n.histogramValue&&n.histogramThresholds&&(t.reduceAdd=v.add(n.histogramValue,t.reduceAdd,j),t.reduceRemove=v.remove(n.histogramValue,t.reduceRemove,j),t.reduceInitial=v.initial(n.histogramThresholds,t.reduceInitial,j)),n.sumOfSquares&&(t.reduceAdd=h.add(n.sumOfSquares,t.reduceAdd,j),t.reduceRemove=h.remove(n.sumOfSquares,t.reduceRemove,j),t.reduceInitial=h.initial(t.reduceInitial,j)),n.std&&(n.sumOfSquares&&n.sum?(t.reduceAdd=y.add(t.reduceAdd,j),t.reduceRemove=y.remove(t.reduceRemove,j),t.reduceInitial=y.initial(t.reduceInitial,j)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),n.custom&&(t.reduceAdd=k.add(t.reduceAdd,j,n.custom.add),t.reduceRemove=k.remove(t.reduceRemove,j,n.custom.remove),t.reduceInitial=k.initial(t.reduceInitial,j,n.custom.initial)),n.nestKeys&&(t.reduceAdd=m.add(n.nestKeys,t.reduceAdd,j),t.reduceRemove=m.remove(n.nestKeys,t.reduceRemove,j),t.reduceInitial=m.initial(t.reduceInitial,j)),n.aliasKeys&&(t.reduceInitial=g.initial(t.reduceInitial,j,n.aliasKeys)),n.aliasPropKeys&&(t.reduceAdd=x.add(n.aliasPropKeys,t.reduceAdd,j),t.reduceRemove=x.add(n.aliasPropKeys,t.reduceRemove,j)),n.filter&&(t.reduceAdd=r.add(n.filter,t.reduceAdd,w.reduceAdd,j),t.reduceRemove=r.remove(n.filter,t.reduceRemove,w.reduceRemove,j)),n.values&&Object.getOwnPropertyNames(n.values).forEach((function(r){var i;t.reduceInitial=(i=t.reduceInitial,function(e){return e=i(e),j(e)[r]={},e}),e(n.values[r].parameters,t,(function(e){return e[r]}))}))}};n.exports=j},{"./alias.js":20,"./aliasProp.js":21,"./avg.js":22,"./count.js":25,"./custom.js":26,"./data-list.js":27,"./exception-count.js":28,"./exception-sum.js":29,"./filter.js":30,"./histogram.js":31,"./max.js":32,"./median.js":33,"./min.js":34,"./nest.js":35,"./std.js":41,"./sum-of-squares.js":42,"./sum.js":43,"./value-count.js":44,"./value-list.js":45}],24:[function(e,n,t){var r=function(e){return function(n){return n[e]}};_grouper=function(e,n){return e||(e=function(e){return e}),function(t,r){n&&n(t,r);var i=e(t),o=e(r);return void 0!==o.count&&(i.count+=o.count),void 0!==o.sum&&(i.sum+=o.sum),void 0!==o.avg&&(i.avg=i.sum/i.count),t}},reductio_cap=function(e,n,t){n.reduceInitial();var i=t.values?Object.keys(t.values):[],o=_grouper();if(i.length)for(var u=0;u<i.length;++u)o=_grouper(r(i[u]),o);return function(t,r){if(!arguments.length)return e();if(t===1/0||!t)return e();var i=e(),u=t-1;if(i.length<=t)return i;var c=i.slice(0,u),a={key:r||"Others"};a.value=n.reduceInitial();for(var s=u;s<i.length;++s)o(a.value,i[s].value);return c.push(a),c}},n.exports=reductio_cap},{}],25:[function(e,n,t){n.exports={add:function(e,n,t){return function(r,i,o){return e&&e(r,i,o),n(r)[t]++,r}},remove:function(e,n,t){return function(r,i,o){return e&&e(r,i,o),n(r)[t]--,r}},initial:function(e,n,t){return function(r){return e&&(r=e(r)),n(r)[t]=0,r}}}},{}],26:[function(e,n,t){n.exports={add:function(e,n,t){return function(n,r,i){return e&&e(n,r,i),t(n,r)}},remove:function(e,n,t){return function(n,r,i){return e&&e(n,r,i),t(n,r)}},initial:function(e,n,t){return function(n){return e&&(n=e(n)),t(n)}}}},{}],27:[function(e,n,t){n.exports={add:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).dataList.push(r),e}},remove:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).dataList.splice(t(e).dataList.indexOf(r),1),e}},initial:function(e,n){return function(t){return e&&(t=e(t)),n(t).dataList=[],t}}}},{}],28:[function(e,n,t){n.exports={add:function(e,n,t){var r,i;return function(o,u,c){return n&&n(o,u,c),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),(i=t(o).values[r])&&i[0]===e(u)&&0!==i[1]||t(o).exceptionCount++,o}},remove:function(e,n,t){var r,i;return function(o,u,c){return n&&n(o,u,c),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),(i=t(o).values[r])&&i[0]===e(u)&&1===i[1]&&t(o).exceptionCount--,o}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionCount=0,t}}}},{}],29:[function(e,n,t){n.exports={add:function(e,n,t,r){var i,o;return function(u,c,a){return t&&t(u,c,a),i=r(u).bisect(r(u).values,e(c),0,r(u).values.length),(o=r(u).values[i])&&o[0]===e(c)&&0!==o[1]||(r(u).exceptionSum=r(u).exceptionSum+n(c)),u}},remove:function(e,n,t,r){var i,o;return function(u,c,a){return t&&t(u,c,a),i=r(u).bisect(r(u).values,e(c),0,r(u).values.length),(o=r(u).values[i])&&o[0]===e(c)&&1===o[1]&&(r(u).exceptionSum=r(u).exceptionSum-n(c)),u}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionSum=0,t}}}},{}],30:[function(e,n,t){n.exports={add:function(e,n,t){return function(r,i,o){return e(i,o)?n&&n(r,i,o):t&&t(r,i,o),r}},remove:function(e,n,t){return function(r,i,o){return e(i,o)?n&&n(r,i,o):t&&t(r,i,o),r}}}},{}],31:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var i,o=r.bisect.by((function(e){return e})).left,u=r.bisect.by((function(e){return e.x})).right;return function(r,c,a){return n&&n(r,c,a),(i=t(r).histogram[u(t(r).histogram,e(c),0,t(r).histogram.length)-1]).y++,i.splice(o(i,e(c),0,i.length),0,e(c)),r}},remove:function(e,n,t){var i,o=r.bisect.by((function(e){return e})).left,u=r.bisect.by((function(e){return e.x})).right;return function(r,c,a){return n&&n(r,c,a),(i=t(r).histogram[u(t(r).histogram,e(c),0,t(r).histogram.length)-1]).y--,i.splice(o(i,e(c),0,i.length),1),r}},initial:function(e,n,t){return function(r){r=n(r),t(r).histogram=[];for(var i=[],o=1;o<e.length;o++)(i=[]).x=e[o-1],i.dx=e[o]-e[o-1],i.y=0,t(r).histogram.push(i);return r}}};n.exports=i},{crossfilter2:1}],32:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){return e&&e(t,r,i),n(t).max=n(t).valueList[n(t).valueList.length-1],t}},remove:function(e,n){return function(t,r,i){return e&&e(t,r,i),0===n(t).valueList.length?(n(t).max=void 0,t):(n(t).max=n(t).valueList[n(t).valueList.length-1],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).max=void 0,t}}};n.exports=r},{}],33:[function(e,n,t){var r={add:function(e,n){var t;return function(r,i,o){return e&&e(r,i,o),t=Math.floor(n(r).valueList.length/2),n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r}},remove:function(e,n){var t;return function(r,i,o){return e&&e(r,i,o),t=Math.floor(n(r).valueList.length/2),0===n(r).valueList.length?(n(r).median=void 0,r):(1===n(r).valueList.length||n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r)}},initial:function(e,n){return function(t){return t=e(t),n(t).median=void 0,t}}};n.exports=r},{}],34:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){return e&&e(t,r,i),n(t).min=n(t).valueList[0],t}},remove:function(e,n){return function(t,r,i){return e&&e(t,r,i),0===n(t).valueList.length?(n(t).min=void 0,t):(n(t).min=n(t).valueList[0],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).min=void 0,t}}};n.exports=r},{}],35:[function(e,n,t){e("crossfilter2");n.exports={add:function(e,n,t){var r,i;return function(o,u,c){return n&&n(o,u,c),r=t(o).nest,e.forEach((function(e){(i=r.filter((function(n){return n.key===e(u)}))[0])?r=i.values:(i=[],r.push({key:e(u),values:i}),r=i)})),r.push(u),o}},remove:function(e,n,t){var r;return function(i,o,u){return n&&n(i,o,u),r=t(i).nest,e.forEach((function(e){r=r.filter((function(n){return n.key===e(o)}))[0].values})),r.splice(r.indexOf(o),1),i}},initial:function(e,n){return function(t){return t=e(t),n(t).nest=[],t}}}},{crossfilter2:1}],36:[function(e,n,t){n.exports=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1,custom:!1}}},{}],37:[function(e,n,t){n.exports=function(e){return function(n,t,r){n.post=function(){var i=function(){return i.all()};i.all=function(){return n.all()};var o=e.postprocessors;return Object.keys(o).forEach((function(e){i[e]=function(){var n=i.all,u=[].slice.call(arguments);return i.all=function(){return o[e](n,r,t).apply(null,u)},i}})),i}}}},{}],38:[function(e,n,t){n.exports=function(n){n.postprocessors={},n.registerPostProcessor=function(e,t){n.postprocessors[e]=t},n.registerPostProcessor("cap",e("./cap")),n.registerPostProcessor("sortBy",e("./sortBy"))}},{"./cap":24,"./sortBy":40}],39:[function(e,n,t){var r=e("./build.js"),i=e("./accessors.js"),o=e("./parameters.js"),u=e("./postprocess"),c=e("crossfilter2");function a(){var e=o(),n={};function t(t){if(n={reduceAdd:function(e){return e},reduceRemove:function(e){return e},reduceInitial:function(){return{}}},r.build(e,n),e.groupAll)if(t.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var i,o,a,s,f,l=c.bisect.by((function(e){return e.key})).left;t.reduce((function(t,r,u){for(a=e.groupAll(r),s=a.length,o=0;o<s;o++)f=a[o],t[i=l(t,f,0,t.length)]&&t[i].key===f||t.splice(i,0,{key:f,value:n.reduceInitial()}),n.reduceAdd(t[i].value,r,u);return t}),(function(t,r,u){for(a=e.groupAll(r),s=a.length,o=0;o<s;o++)i=l(t,a[o],0,t.length),n.reduceRemove(t[i].value,r,u);return t}),(function(){return[]})),t.all||(t.all=function(){return this.value()})}else t.reduce(n.reduceAdd,n.reduceRemove,n.reduceInitial);return u(t,e,n),t}return i.build(t,e),t}e("./postprocessors")(a),u=u(a),n.exports=a},{"./accessors.js":19,"./build.js":23,"./parameters.js":36,"./postprocess":37,"./postprocessors":38,crossfilter2:1}],40:[function(e,n,t){var r=function(e){if("function"==typeof e)return e;if(~e.indexOf(".")){var n=e.split(".");return function(e){return n.reduce((function(e,n){return e[n]}),e)}}return function(n){return n[e]}};function i(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var o=function(e,n){return function(t,r){return n(e(t),e(r))}};n.exports=function(e){return function(n,t){return 1===arguments.length&&(t=i),e().sort(o(r(n),t))}}},{}],41:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){if(e&&e(t,r,i),n(t).count>0){n(t).std=0;var o=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;o>0&&(n(t).std=Math.sqrt(o/(n(t).count-1)))}else n(t).std=0;return t}},remove:function(e,n){return function(t,r,i){if(e&&e(t,r,i),n(t).count>0){n(t).std=0;var o=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;o>0&&(n(t).std=Math.sqrt(o/(n(t).count-1)))}else n(t).std=0;return t}},initial:function(e,n){return function(t){return t=e(t),n(t).std=0,t}}};n.exports=r},{}],42:[function(e,n,t){n.exports={add:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sumOfSq=t(r).sumOfSq+e(i)*e(i),r}},remove:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sumOfSq=t(r).sumOfSq-e(i)*e(i),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sumOfSq=0,t}}}},{}],43:[function(e,n,t){n.exports={add:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sum=t(r).sum+e(i),r}},remove:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sum=t(r).sum-e(i),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sum=0,t}}}},{}],44:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var r,i;return function(o,u,c){return n&&n(o,u,c),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),(i=t(o).values[r])&&i[0]===e(u)?i[1]++:t(o).values.splice(r,0,[e(u),1]),o}},remove:function(e,n,t){var r;return function(i,o,u){return n&&n(i,o,u),r=t(i).bisect(t(i).values,e(o),0,t(i).values.length),t(i).values[r][1]--,i}},initial:function(e,n){return function(t){return t=e(t),n(t).values=[],n(t).bisect=r.bisect.by((function(e){return e[0]})).left,t}}};n.exports=i},{crossfilter2:1}],45:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var i,o=r.bisect.by((function(e){return e})).left;return function(r,u,c){return n&&n(r,u,c),i=o(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(i,0,e(u)),r}},remove:function(e,n,t){var i,o=r.bisect.by((function(e){return e})).left;return function(r,u,c){return n&&n(r,u,c),i=o(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(i,1),r}},initial:function(e,n){return function(t){return t=e(t),n(t).valueList=[],t}}};n.exports=i},{crossfilter2:1}],46:[function(e,n,t){"use strict";var r=e("./lodash"),i={$sum:function(e){return e.reduce((function(e,n){return e+n}),0)},$avg:function(e){return e.reduce((function(e,n){return e+n}),0)/e.length},$max:function(e){return Math.max.apply(null,e)},$min:function(e){return Math.min.apply(null,e)},$count:function(e){return e.length},$first:function(e){return e[0]},$last:function(e){return e[e.length-1]},$get:s,$nth:s,$nthLast:function(e,n){return e[e.length-n]},$nthPct:function(e,n){return e[Math.round(e.length*(n/100))]},$map:function(e,n){return e.map((function(e){return e[n]}))}};function o(e){if(e=r.isObject(e)?u(e):e,r.isString(e))return c(e)?o(a(e)):function(n){return n[e]};if(r.isArray(e)){var n=r.map(e,o);return function(e){return n.map((function(n){return n(e)}))}}if(e.key){if(i[e.key]){var t=o(e.value);return function(n){return i[e.key](t(n))}}console.error("Could not find aggregration method",e)}return[]}function u(e){var n,t=[];for(var r in e)if({}.hasOwnProperty.call(e,r)){n={key:r,value:e[r]};var i={};i[r]=e[r],t.push(i)}return t.length>1?t:n}function c(e){return["$","("].indexOf(e.charAt(0))>-1}function a(e){var n=/\((.+)\)/g,t=/(?:\([^\(\)]*\))|(,)/g;return JSON.parse("{"+function e(r){return'"'+(r=r.replace(" ","")).replace(n,(function(n,r){if(t.test(r))return"$"===r.charAt(0)?'":{"'+r.replace(t,(function(n){return","===n?',"':e(n).trim()}))+"}":':["'+r.replace(t,(function(){return'","'}))+'"]'}))}(e)+"}")}function s(e,n){return e[n]}n.exports={makeValueAccessor:function(e){if("string"==typeof e){if(!c(e))return e;e=a(e)}if("number"==typeof e)return e;if(r.isObject(e))return n=o(e),function(e){return n(e)};var n},aggregators:i,extractKeyValOrArray:u,parseAggregatorParams:function(e){var n=[],t=e.indexOf("("),r=e.indexOf(")"),o=t>-1?e.substring(0,t):e;if(!i[o])return!1;t>-1&&r>-1&&r>t&&(n=e.substring(t+1,r).split(","));return{aggregator:i[o],params:n}}}},{"./lodash":54}],47:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(e){return function(n){return n&&(n=i.isArray(n)?n:[n]),n?r.all(i.map(n,(function(n){i.isObject(n)&&(n=n.key);var r=i.remove(e.columns,(function(e){return i.isArray(n)?!i.xor(e.key,n).length:e.key===n?!e.dynamicReference:void 0}))[0];r&&t(r)}))).then((function(){return e})):r.all(i.map(e.columns,t)).then((function(){return e.columns=[],e}));function t(n){var t=[];n.removeListeners&&(t=i.map(n.removeListeners,(function(e){return r.resolve(e())})));var o=n.key;return"array"===n.complex&&(o=JSON.stringify(n.key)),"function"===n.complex&&(o=n.key.toString()),delete e.filters[o],n.dimension&&t.push(r.resolve(n.dimension.dispose())),r.all(t)}}}},{"./lodash":54,q:18}],48:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(n){var t=e("./dimension")(n),o=function(e){i.isUndefined(e)&&(e=!0);i.isArray(e)||(e=[e]);return r.all(i.map(e,c)).then((function(){return n}))};return o.find=u,o;function u(e){return i.find(n.columns,(function(n){return i.isArray(e)?!i.xor(n.key,e).length:n.key===e}))}function c(e){var o=i.isObject(e)?e:{key:e},c=u(o.key);return c?(c.temporary=!1,c.dynamicReference&&(c.dynamicReference=!1),c.promise.then((function(){return n}))):(o.queries=[],n.columns.push(o),o.promise=r.try((function(){return r.resolve(n.cf.all())})).then((function(e){var n;if(i.isFunction(o.key))o.complex="function",n=o.key(e[0]);else if(i.isString(o.key)&&(o.key.indexOf(".")>-1||o.key.indexOf("[")>-1))o.complex="string",n=i.get(e[0],o.key);else if(i.isArray(o.key)){if(o.complex="array",(n=i.values(i.pick(e[0],o.key))).length!==o.key.length)throw new Error("Column key does not exist in data!",o.key)}else n=e[0][o.key];if(!o.complex&&!0!==o.key&&void 0===n)throw new Error("Column key does not exist in data!",o.key);return!0===o.key?o.type="all":o.complex?o.type="complex":o.array?o.type="array":o.type=function(e){return i.isNumber(e)?"number":i.isBoolean(e)?"bool":i.isArray(e)?"array":i.isObject(e)?"object":"string"}(n),t.make(o.key,o.type,o.complex)})).then((function(e){o.dimension=e,o.filterCount=0;var u=n.onDataChange(c);return o.removeListeners=[u],c();function c(e){if(!0===o.key)return r.resolve();var n=t.makeAccessor(o.key,o.complex);return o.values=o.values||[],r.try((function(){return e&&e.added?r.resolve(e.added):r.resolve(o.dimension.bottom(1/0))})).then((function(e){var t;t="string"===o.complex||"function"===o.complex?i.map(e,n):"array"===o.type?i.flatten(i.map(e,n)):i.map(e,n),o.values=i.uniq(o.values.concat(t))}))}})),o.promise.then((function(){return n})))}}},{"./dimension":51,"./lodash":54,q:18}],49:[function(e,n,t){"use strict";var r=e("q"),i=e("crossfilter2"),o=e("./lodash");n.exports=function(e){return{build:function(e){if(o.isArray(e))return r.resolve(i(e));if(!e||"function"!=typeof e.dimension)return r.reject(new Error("No Crossfilter data or instance found!"));return r.resolve(e)},generateColumns:n,add:function(t){return t=n(t),r.try((function(){return r.resolve(e.cf.add(t))})).then((function(){return r.serial(o.map(e.dataListeners,(function(e){return function(){return e({added:t})}})))})).then((function(){return e}))},remove:function(){return r.try((function(){return r.resolve(e.cf.remove())})).then((function(){return e}))}};function n(n){return e.options.generatedColumns?o.map(n,(function(n){return o.forEach(e.options.generatedColumns,(function(e,t){n[t]=e(n)})),n})):n}}},{"./lodash":54,crossfilter2:1,q:18}],50:[function(e,n,t){"use strict";var r=e("q");n.exports=function(e){return function(){return e.clear().then((function(){return e.cf.dataListeners=[],e.cf.filterListeners=[],r.resolve(e.cf.remove())})).then((function(){return e}))}}},{q:18}],51:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(e){return{make:function(t,i,o){var u=n(t,o);return r.resolve(e.cf.dimension(u,"array"===i))},makeAccessor:n};function n(e,n){var t;if("string"===n)t=function(n){return i.get(n,e)};else if("function"===n)t=e;else if("array"===n){var r=i.map(e,(function(e){return"d['"+e+"']"}));t=new Function("d",String("return "+JSON.stringify(r).replace(/"/g,"")))}else t=!0===e?function(e,n){return n}:function(n){return n[e]};return t}}},{"./lodash":54,q:18}],52:[function(e,n,t){"use strict";n.exports={$field:function(e,n){return e[n]},$and:function(e,n){n=n(e);for(var t=0;t<n.length;t++)if(!n[t])return!1;return!0},$or:function(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!0;return!1},$not:function(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!1;return!0},$eq:function(e,n){return e===n()},$gt:function(e,n){return e>n()},$gte:function(e,n){return e>=n()},$lt:function(e,n){return e<n()},$lte:function(e,n){return e<=n()},$ne:function(e,n){return e!==n()},$type:function(e,n){return typeof e===n()},$in:function(e,n){return e.indexOf(n())>-1},$nin:function(e,n){return-1===e.indexOf(n())},$contains:function(e,n){return n().indexOf(e)>-1},$excludes:function(e,n){return-1===n().indexOf(e)},$size:function(e,n){return e.length===n()}}},{}],53:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash"),o=e("./expressions"),u=e("./aggregation");n.exports=function(e){return{filter:function(r,o,u,a){return n(r).then((function(n){var r=i.assign({},e.filters),s=n.key;return"array"===n.complex&&(s=JSON.stringify(n.key)),"function"===n.complex&&(s=n.key.toString()),r[s]=t(o,u,a),c(r)}))},filterAll:function(o){if(!o)return e.columns.forEach((function(e){e.dimension.filterAll()})),c({});var u=i.assign({},e.filters),a=i.map(o,(function(e){return n(e.column).then((function(n){var r=n.complex?JSON.stringify(n.key):n.key;u[r]=t(e.value,e.isRange,e.replace)}))}));return r.all(a).then((function(){return c(u)}))},applyFilters:c,makeFunction:s,scanForDynamicFilters:function(e){var n=[];return function e(t){i.forEach(t,(function(t,r){var o=a(t,r);o&&n.push(o),i.isString(t)&&(o=a(null,t))&&n.push(o),i.isObject(t)&&e(t)}))}(e.filter),n}};function n(n){var t=e.column.find(n);return r.try((function(){return t||e.column({key:n,temporary:!0}).then((function(){return e.column.find(n)}))}))}function t(e,n,t){return!i.isUndefined(e)&&(i.isFunction(e)?{value:e,function:e,replace:!0,type:"function"}:i.isObject(e)?{value:e,function:s(e),replace:!0,type:"function"}:i.isArray(e)?{value:e,replace:n||t,type:n?"range":"inclusive"}:{value:e,replace:t,type:"exact"})}function c(n){var t=i.map(n,(function(t,o){var u,c=e.filters[o];return t===c?r.resolve():(u="["===o.charAt(0)?e.column.find(JSON.parse(o)):e.column.find(o),t&&c&&!t.replace&&(n[o]=t=function(e,n){if("exact"===e.type&&"inclusive"===n.type)e.value=i.xor([e.value],n.value);else if("inclusive"===e.type&&"exact"===n.type)e.value=i.xor(e.value,[n.value]);else if("inclusive"===e.type&&"inclusive"===n.type)e.value=i.xor(e.value,n.value);else if("exact"===e.type&&"exact"===n.type){if(e.value===n.value)return!1;e.value=[e.value,n.value]}e.value.length?1===e.value.length?(e.type="exact",e.value=e.value[0]):e.type="inclusive":e=!1;return e}(t,c)),t?"exact"===t.type?r.resolve(u.dimension.filterExact(t.value)):"range"===t.type?r.resolve(u.dimension.filterRange(t.value)):"inclusive"===t.type?r.resolve(u.dimension.filterFunction((function(e){return t.value.indexOf(e)>-1}))):"function"===t.type?r.resolve(u.dimension.filterFunction(t.function)):r.resolve(u.dimension.filterAll()):r.resolve(u.dimension.filterAll()))}));return r.all(t).then((function(){e.filters=n;var t=[];return i.forEach(e.filters,(function(n,r){n||(t.push({key:r,val:n}),delete e.filters[r])})),r.all(i.map(t,(function(n){var t=e.column.find("["===n.key.charAt(0)?JSON.parse(n.key):n.key);if(t.temporary&&!t.dynamicReference)return e.clear(t.key)})))})).then((function(){return r.all(i.map(e.filterListeners,(function(e){return e()})))})).then((function(){return e}))}function a(e,n){return"$data"===n||(n&&"$column"===n?i.isString(e)?e:(console.warn('The value for filter "$column" must be a valid column key',e),!1):void 0)}function s(n,t){var r;if(i.isString(n)&&a(null,n)){var c=e.cf.all();return function(){return c}}return i.isString(n)||i.isNumber(n)||i.isBoolean(n)?function(e){return void 0===e?n:o.$eq(e,(function(){return n}))}:i.isArray(n)?(r=i.map(n,(function(e){return s(e,t)})),function(e){return r.map((function(n){return n(e)}))}):i.isObject(n)?(r=i.map(n,(function(n,r){var i=s(n,t),c=a(n,r);if(c){var f=e.column.find(c).values;return function(){return f}}if(o[r])return function(e){return o[r](e,i)};var l=u.parseAggregatorParams(r);return l?(i=s(n,t=!0),function(){return l.aggregator.apply(null,[i()].concat(l.params))}):function(e){return e=e[r],i(e,i)}})),t?1===r.length?function(e){return r[0](e)}:function(e){return i.map(r,(function(n){return n(e)}))}:function(e){return o.$and(e,(function(e){return i.map(r,(function(n){return n(e)}))}))}):(console.log("no expression found for ",n),!1)}}},{"./aggregation":46,"./expressions":52,"./lodash":54,q:18}],54:[function(e,n,t){"use strict";function r(e){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var t in arguments[n])arguments[n].hasOwnProperty(t)&&(e[t]=arguments[n][t]);return e}function i(e){return Array.isArray(e)}function o(e){return"object"==typeof e&&!i(e)}function u(e){return"function"==typeof e}function c(e,n){if(o(e))for(var t in e)e.hasOwnProperty(t)&&n(e[t],t,e);else if(i(e))return e.forEach(n)}function a(e){return JSON.parse(JSON.stringify(e,(function(e,n){return"function"==typeof n?n.toString():n})))}n.exports={assign:r,find:function(e,n){return e.find(n)},remove:function(e,n){return e.filter((function(t,r){return!!n(t)&&(e.splice(r,1),!0)}))},isArray:i,isObject:o,isBoolean:function(e){return"boolean"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isFunction:u,get:function(e,n){i(n)&&(n=n.join("."));return n.replace("[",".").replace("]","").split(".").reduce((function(e,n){return e[n]}),e)},set:function(e,n,t){"string"==typeof n&&(n=n.replace("[",".").replace("]","").split("."));if(n.length>1){var i=n.shift();r(e[i]="[object Object]"===Object.prototype.toString.call(e[i])?e[i]:{},n,t)}else e[n[0]]=t},map:function(e,n){var t,r;if(u(n)){if(o(e)){for(r in t=[],e)e.hasOwnProperty(r)&&t.push(n(e[r],r,e));return t}return e.map(n)}if(o(e)){for(r in t=[],e)e.hasOwnProperty(r)&&t.push(e[r]);return t}return e.map((function(e){return e[n]}))},keys:function(e){return Object.keys(e)},sortBy:function(e,n){if(u(n))return e.sort((function(e,t){return n(e)>n(t)?1:n(e)<n(t)?-1:0}))},forEach:c,isUndefined:function(e){return void 0===e},pick:function(e,n){var t={};return c(n,(function(n){void 0!==e[n]&&(t[n]=e[n])})),t},xor:function(e,n){var t=[];return c(e,(function(e){if(-1===n.indexOf(e))return t.push(e)})),c(n,(function(n){if(-1===e.indexOf(n))return t.push(n)})),t},clone:a,isEqual:function e(n,t){if("object"==typeof n&&null!==n&&"object"==typeof t&&null!==t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var r in n)return t.hasOwnProperty(r)&&e(n[r],t[r]),!1;return!0}if(n!==t)return!1;return!0},replaceArray:function(e,n){var t=e.length,r=n.length;t>r?e.splice(r,t-r):t<r&&e.push.apply(e,new Array(r-t));return c(e,(function(t,r){e[r]=n[r]})),e},uniq:function(e){var n=new Set;return e.filter((function(e){var t=!1;return n.has(e)||(n.add(e),t=!0),t}))},flatten:function(e){for(var n=[],t=0;t<e.length;++t)for(var r=e[t],i=0;i<r.length;++i)n.push(r[i]);return n},sort:function(e){for(var n=1;n<e.length;n++){for(var t=e[n],r=n;e[r-1]>t;)e[r]=e[r-1],--r;e[r]=t}return e},values:function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},recurseObject:function(e,n){return function e(t,r){for(var i in t){var o=a(r);if(o.push(i),"object"==typeof t[i]&&null!==t[i])e(t[i],o);else{if(!t.hasOwnProperty(i))continue;n(t[i],i,o)}}}(e,[]),e}}},{}],55:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash"),o=e("./aggregation");function u(e){return e.locked?i.clone(e.data):e.data}n.exports=function(){return{post:function(e,n,t){return e.data=u(n),r.resolve(t(e,n))},sortByKey:function(e,n,t){e.data=u(n),e.data=i.sortBy(e.data,(function(e){return e.key})),t&&e.data.reverse()},limit:function(e,n,t,r){e.data=u(n),i.isUndefined(r)?(r=t||0,t=0):(t=t||0,r=r||e.data.length);e.data=e.data.splice(t,r-t)},squash:function(e,n,t,r,c,a){e.data=u(n),t=t||0,r=r||e.data.length;var s=e.data.splice(t,r-t),f={key:a||"Other",value:{}};i.recurseObject(c,(function(e,n,t){var r=[];i.forEach(s,(function(e){r.push(i.get(e.value,t))})),i.set(f.value,t,o.aggregators[e](r))})),e.data.splice(t,0,f)},change:function(e,n,t,r,o){e.data=u(n),t=t||0,r=r||e.data.length;var c={key:[e.data[t].key,e.data[r].key],value:{}};i.recurseObject(o,(function(n,o,u){var a=i.clone(u);a.pop(),a.push(o+"Change"),i.set(c.value,a,i.get(e.data[r].value,u)-i.get(e.data[t].value,u))})),e.data=c},changeMap:function(e,n,t,r){r=i.isUndefined(r)?0:r,e.data=u(n),i.recurseObject(t,(function(n,t,o){var u=i.clone(o),c=i.clone(o),a=i.clone(o);u.pop(),c.pop(),a.pop(),u.push(t+"Change"),c.push(t+"ChangeFromStart"),a.push(t+"ChangeFromEnd");var s=i.get(e.data[0].value,o,r),f=i.get(e.data[e.data.length-1].value,o,r);i.forEach(e.data,(function(n,t){var l=e.data[t-1]||e.data[0];i.set(e.data[t].value,u,i.get(n.value,o,r)-(l?i.get(l.value,o,r):r)),i.set(e.data[t].value,c,i.get(n.value,o,r)-s),i.set(e.data[t].value,a,i.get(n.value,o,r)-f)}))}))}}}},{"./aggregation":46,"./lodash":54,q:18}],56:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");r.serial=function(e){var n,t=new Error;return i.forEach(e,(function(e,i){var u,c=e.success||e,a=e.fail,s=e.notify;if(n)u=n.then((function(e){if(!c)return e;var n=c(e);if(!o(n))throw t.message="Task "+i+" did not return a promise.",t;return n}),(function(e){if(!a)return r.reject(e);var n=a(e);if(!o(n))throw t.message="Fail for task "+i+" did not return a promise.",t;return n}),s);else if(u=c(),!o(u))throw t.message="Task "+i+" did not return a promise.",t;n=u})),n||r.when()};var o=function(e){return e&&i.isFunction(e.then)}},{"./lodash":54,q:18}],57:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(n){var t=e("./reductiofy")(n),o=e("./filters")(n),u=e("./postAggregation")(n),c=i.keys(u);return function(e){for(var a=JSON.stringify(e),s=0;s<n.columns.length;s++)for(var f=0;f<n.columns[s].queries.length;f++)if(n.columns[s].queries[f].hash===a)return r.try((function(){return n.columns[s].queries[f]}));var l={original:e,hash:a};return i.isUndefined(l.original)&&(l.original={}),i.isUndefined(l.original.select)&&(l.original.select={$count:!0}),l.original.groupBy=l.original.groupBy||!0,function(e){return n.column({key:e.original.groupBy,type:i.isUndefined(e.type)?null:e.type,array:Boolean(e.array)}).then((function(){var t=n.column.find(e.original.groupBy);return e.column=t,t.queries.push(e),t.removeListeners.push((function(){return e.clear()})),e}))}(l=function e(t,o){var a=!1;o||(o=t,t={},a=!0);return i.assign(t,{universe:n,crossfilter:n.cf,parent:o,column:o.column,dimension:o.dimension,group:o.group,reducer:o.reducer,original:o.original,hash:o.hash,removeListeners:[],postAggregations:[],locked:a,lock:function(e){if(!i.isUndefined(e))return void(t.locked=Boolean(e));t.locked=!0},unlock:function(){t.locked=!1},clear:function(){return i.forEach(t.removeListeners,(function(e){e()})),r.try((function(){return t.group.dispose()})).then((function(){if(t.column.queries.splice(t.column.queries.indexOf(t),1),!t.column.queries.length)return n.clear(t.column.key)})).then((function(){return n}))}}),i.forEach(c,(function(e){t[e]=s(u[e])})),t;function s(n){return function(){var i=Array.prototype.slice.call(arguments),o={};return e(o,t),i.unshift(o,t),t.postAggregations.push((function(){r.resolve(n.apply(null,i)).then(u)})),r.resolve(n.apply(null,i)).then(u);function u(){return h(o).then((function(){return o}))}}}}(l)).then((function(e){return r.resolve(e.column.dimension.group()).then((function(n){return e.group=n,e}))})).then((function(e){var t=o.scanForDynamicFilters(e.original);if(t.length)return r.all(i.map(t,(function(t){return n.column({key:t,dynamicReference:e.group})}))).then((function(){return e}));return e})).then((function(e){var t=n.onDataChange((function(){return p(e)}));e.removeListeners.push(t);var r=n.onFilter((function(){return h(e)}));return e.removeListeners.push(r),e})).then(p);function p(e){return function(e){return t(e.original).then((function(n){return e.reducer=n,e}))}(e).then(d).then(v).then(h)}function d(e){return r.resolve(e.reducer(e.group)).then((function(){return e}))}function v(e){return r.resolve(e.group.all()).then((function(n){return e.data=n,e}))}function h(e){return e.postAggregations.length>1&&(e.locked=!0),r.all(i.map(e.postAggregations,(function(e){return e()}))).then((function(){return e}))}}}},{"./filters":53,"./lodash":54,"./postAggregation":55,"./reductiofy":59,q:18}],58:[function(e,n,t){"use strict";n.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:function(e){return e.count(!0)},$sum:function(e,n){return e.sum(n)},$avg:function(e,n){return e.avg(n)},$min:function(e,n){return e.min(n)},$max:function(e,n){return e.max(n)},$med:function(e,n){return e.median(n)},$sumSq:function(e,n){return e.sumOfSq(n)},$std:function(e,n){return e.std(n)},$valueList:function(e,n){return e.valueList(n)},$dataList:function(e){return e.dataList(!0)}}}},{}],59:[function(e,n,t){"use strict";var r=e("reductio"),i=e("./lodash"),o=e("./reductioAggregators"),u=e("./aggregation");n.exports=function(n){var t=e("./filters")(n);return function(e){var n=r();if(function e(n,t){var r=i.sortBy(i.map(t,(function(e,n){return{key:n,value:e}})),(function(e){return o.aggregators[e.key]?0:1}));return i.forEach(r,(function(t){if(o.aggregators[t.key]){var r=u.makeValueAccessor(t.value);n=o.aggregators[t.key](n,r)}else i.isObject(t.value)?e(n.value(t.key),t.value):console.error("Nested selects must be an object",t.key)}))}(n,e.select),e.filter){var c=t.makeFunction(e.filter);c&&n.filter(c)}return Promise.resolve(n)}}},{"./aggregation":46,"./filters":53,"./lodash":54,"./reductioAggregators":58,reductio:39}],60:[function(e,n,t){"use strict";e("./q.serial");var r=e("./lodash");n.exports=function(n,t){var i={options:r.assign({},t),columns:[],filters:{},dataListeners:[],filterListeners:[]},o=e("./crossfilter")(i),u=e("./filters")(i);return n=o.generateColumns(n),o.build(n).then((function(n){return i.cf=n,r.assign(i,{add:o.add,remove:o.remove,column:e("./column")(i),query:e("./query")(i),filter:u.filter,filterAll:u.filterAll,applyFilters:u.applyFilters,clear:e("./clear")(i),destroy:e("./destroy")(i),onDataChange:c,onFilter:a})}));function c(e){return i.dataListeners.push(e),function(){i.dataListeners.splice(i.dataListeners.indexOf(e),1)}}function a(e){return i.filterListeners.push(e),function(){i.filterListeners.splice(i.filterListeners.indexOf(e),1)}}}},{"./clear":47,"./column":48,"./crossfilter":49,"./destroy":50,"./filters":53,"./lodash":54,"./q.serial":56,"./query":57}]},{},[60])(60)}));