define(["jquery",M.cfg.wwwroot+"/mod/page/lib/build/vue.min"],(function(e,t){t.component("ReadingProgress",{props:["log"],data:function(){return{}},mounted:function(){(this.enableScrollLogging(),this.visualizeReadingProgress(),"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)&&new IntersectionObserver(e=>{e[0].boundingClientRect.y<0?document.getElementById("longpage-navbar").classList.add("header-not-at-top"):document.getElementById("longpage-navbar").classList.remove("header-not-at-top")}).observe(document.querySelector("#top-of-site-pixel-anchor"))},methods:{enableScrollLogging:function(){let t=this;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&document.querySelector(".longpage-container")){var n,o,i=document.querySelector(".longpage-container"),r=document.documentElement.scrollHeight-window.innerHeight,a=document.documentElement.scrollWidth-window.innerWidth;if(window.getComputedStyle&&i){var d=window.getComputedStyle(i);n=parseFloat(d.paddingTop)+parseFloat(d.paddingBottom),o=parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}var s=i.clientHeight-n,l=i.clientWidth-o,c=0,g=0,p=new IntersectionObserver((function(e){for(var n of(e[0].boundingClientRect.y,e))if(void 0===n.isVisible&&(n.isVisible=!0),n.isIntersecting&&n.isVisible){var o=new Date;c=window.pageXOffset||(document.documentElement||document.body.parentNode||document.body).scrollRight,g=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;var i={utc:o.getTime(),relativeTime:n.time,targetID:n.target.id,targetTag:n.target.localName,targetClasses:n.target.className,scrollXDistance:void 0===c?0:c,scrollYDistance:void 0===g?0:g,scrollHeight:r,scrollWidth:a,containerHeight:s,containerWidth:l};t.$emit("log","scroll",i)}}),{root:null,rootMargin:"0px",threshold:[1],trackVisibility:!0,delay:100}),m=0;e("p, ul, pre, div.longpage-image-block, div.longpage-assignment, h2, h3").each((function(t,n){""!==e(this).attr("id")&&void 0!==e(this).attr("id")||(e(this).attr("id","paragraph-"+m).addClass("longpage-paragraph"),m++),p.observe(document.querySelector("#"+e(this).attr("id")))}))}},visualizeReadingProgress:function(){for(var t=1;t<460;t++)e("#paragraph-"+t).append(e("<span></span>").addClass("reading-progress progress-"+Math.ceil(5*Math.random())))}},template:"\n                <div></div>\n            "})}));