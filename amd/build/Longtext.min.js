define(["jquery",M.cfg.wwwroot+"/mod/page/amd/src/Components/ReadingTime.js",M.cfg.wwwroot+"/mod/page/amd/src/Components/TableOfContent.js",M.cfg.wwwroot+"/mod/page/amd/src/Components/Search.js",M.cfg.wwwroot+"/mod/page/amd/src/Components/ReadingProgress.js",M.cfg.wwwroot+"/mod/page/amd/src/Components/CourseRecommondation.js",M.cfg.wwwroot+"/mod/page/amd/src/Components/Bookmark.js"],(function(n,e,a,t,o,s,i){return function(l,c,r,d,b){l.component("TableOfContent",a),l.component("Search",t),l.component("ReadingProgress",o),l.component("ReadingTime",e),l.component("CourseRecommondation",s),l.component("Bookmark",i);new l({el:"longpage-container",store:new c(b).store,data:function(){return{pagename:b.pagename,context:b,tabContentVisible:!1}},mounted:function(){var e=this;this.$store.dispatch("loadBookmarks"),n(".longpage-citation").click((function(){e.log("citation_view",{citation:n(this).data("content")})})),n(".longpage-footnote").click((function(){e.log("footnote_view",{title:n(this).find("button").data("original-title"),text:n(this).find("button").data("content")})})),n(".longpage-crossref").click((function(){e.log("crossref_follow",{source:n(this).text(),target:n(this).attr("href"),parent:n(this).parent().attr("id")})})),n(".longpage-assignment-link").click((function(){e.log("assignment_open",{target:n(this).attr("href")})}))},methods:{log(n,e){d.add(n,e)},showTabContent(){this.tabContentVisible=!0},hideTabContent(){this.tabContentVisible=!1,document.querySelector("#longpage-features").querySelector("a.active.show").classList.remove("active")},followLink:function(n,e){let a=document.getElementById(n);if(!a)return;let t=a.getBoundingClientRect().top,o=window.pageYOffset||document.documentElement.scrollTop;window.scroll({top:t+o-150,behavior:"smooth"}),this.hideTabContent(),e.preventDefault()}},template:'\n                <div>\n                    <nav id="longpage-navbar" class="navbar-expand navbar-light bg-light py-2 mx-0 pl-1 pr-2">\n                        <div class="row w-100 px-0 mx-0">\n                            <span class="title-toc col-4 col-sm-4 col-xs-12">\n                                <a class="navbar-brand">{{ pagename }}</a>\n                            </span>\n                            <div class="col-8 col-md-8 col-xs-12">\n                                <ul class="nav nav-tabs" id="longpage-features" role="tablist">\n                                    <li class="nav-item">\n                                        <a class="nav-link" id="toc-tab" title="Inhaltsverzeichnis" data-toggle="tab" href="#tableofcontent" role="tab" aria-controls="tableofcontents" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-list"></i><span class="ml-1 d-none d-md-inline">Inhaltsverzeichnis</span>\n                                        </a>\n                                    </li>\n                                    <li hidden class="nav-item">\n                                        <a class="nav-link" id="concepts-tab" title="Concept Map" data-toggle="tab" href="#concepts" role="tab" aria-controls="concepts" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-map"></i><span class="ml-1 d-none d-md-inline">Concept Map</span>\n                                        </a>\n                                    </li>\n                                    <li hidden class="nav-item">\n                                        <a class="nav-link" id="tests-tab" title="Selbsttests" data-toggle="tab" href="#tests" role="tab" aria-controls="tests" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-check"></i> <span class="ml-1 d-none d-md-inline">Selbsttestaufgaben</span>\n                                        </a>\n                                    </li>\n                                    <li class="nav-item" hidden>\n                                        <a class="nav-link" id="bookmarks-tab" title="Lesezeichen" data-toggle="tab" href="#bookmarks" role="tab" aria-controls="bookmarkss" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-bookmark"></i><span class="ml-1 d-none d-md-inline">Lesezeichen</span>\n                                        </a>\n                                    </li>\n                                    <li hidden class="nav-item">\n                                        <a class="nav-link" id="annotations-tab" title="Hervorhebungen" data-toggle="tab" href="#annotations" role="tab" aria-controls="annotations" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-pencil"></i><span class="ml-1 d-none d-md-inline">Hervorhebungen</span>\n                                        </a>\n                                    </li>\n                                    <li class="nav-item">\n                                        <a class="nav-link" id="search-tab" data-toggle="tab" href="#search" role="tab" aria-controls="search" aria-selected="false" @click="showTabContent()">\n                                            <i class="fa fa-search"></i> <span class="ml-1 d-none d-md-inline">Suche</span>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        \n                        \x3c!-- Longpage Feature Tabs --\x3e\n                        <div :style="{display: tabContentVisible ? \'block\' : \'none\'}" class="tab-content" id="myTabContent">\n                            <div class="tab-pane fade p-3" id="tableofcontent" role="tabpanel" aria-labelledby="toc-tab">\n                                <TableOfContent @hideTabContent=\'hideTabContent\' v-on:log=\'log\'></TableOfContent>\n                            </div>\n                            <div class="tab-pane fade v" id="concepts" role="tabpanel" aria-labelledby="toc-tab">\n                                <CourseRecommondation @hideTabContent=\'hideTabContent\' v-on:log=\'log\'></CourseRecommondation>\n                            </div>\n                            <div class="tab-pane fade p-3" id="tests" role="tabpanel" aria-labelledby="toc-tab">\n                                Tests\n                                <button type="button" class="close ml-auto align-self-center d-block" aria-label="Close" v-on:click="hideTabContent()">\n                                    <span aria-hidden="true">&times;</span>\n                                </button>\n                            </div>\n                            <div class="tab-pane fade p-3" id="bookmarks" role="tabpanel" aria-labelledby="toc-tab">\n                                <button type="button" class="close ml-auto align-self-center d-block" aria-label="Close" v-on:click="hideTabContent()">\n                                        <span aria-hidden="true">&times;</span>\n                                </button>\n                                <div class="w-75" v-if="$store.getters.getBookmarks.length == 0">\n                                    Es wurden noch keine Lesezeichen angelegt. Markieren Sie einen Textauschnitt, um ein Lesezeichen anzulegen.\n                                </div>\n                                <div v-if="$store.getters.getBookmarks.length > 0">\n                                    Meine Lesezeichen:\n                                    <ul>\n                                        <li v-for="b in $store.getters.getBookmarks">\n                                            <a v-on:click="followLink(b.target, $event)" style="cursor:pointer;">{{ b.selection }}</a> \n                                            <i v-on:click="$store.commit(\'removeBookmark\', b.id)" class="ml-3 p-1 fa fa-trash"></i>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="tab-pane fade p-3" id="annotations" role="tabpanel" aria-labelledby="toc-tab">\n                                Annotations\n                                <button type="button" class="close ml-auto align-self-center d-block" aria-label="Close" v-on:click="hideTabContent()">\n                                    <span aria-hidden="true">&times;</span>\n                                </button>\n                            </div>\n                            <div class="tab-pane fade p-3" id="search" role="tabpanel" aria-labelledby="search-tab">\n                                <Search @hideTabContent=\'hideTabContent\' v-on:log=\'log\'></Search>\n                            </div>\n                        </div>\n                    </nav>\n\n                    <ReadingTime></ReadingTime>\n                    <ReadingProgress v-on:log=\'log\' v-bind:context="context"></ReadingProgress>\n                    <Bookmark v-on:log=\'log\'></Bookmark>\n                </div>\n            '})}}));